# Задание 1 ----

# Функция для моделирования процесса garch(1,0)
garch_process <- function(omega, alpha, num_obs, initial_volatility = 1, initial_process_value = 1) {
  # Проверка корректности входных параметров
  if (omega <= 0) stop("omega должно быть положительным")  # omega должно быть больше нуля
  if (alpha <= 0 || alpha >= 1) stop("alpha должно быть в диапазоне (0, 1)")  # alpha должно быть между 0 и 1
  
  # Инициализация векторов для хранения значений процесса и волатильности
  process_values <- numeric(num_obs)  # Создаем вектор для значений процесса
  volatility <- numeric(num_obs)  # Создаем вектор для значений волатильности
  
  # Генерация случайных ошибок с нормальным распределением
  errors <- rnorm(num_obs, mean = 0, sd = 1)  # Генерируем случайные ошибки
  volatility[1] <- initial_volatility  # Устанавливаем начальное значение волатильности
  process_values[1] <- initial_process_value  # Устанавливаем начальное значение процесса
  
  # Вычисление значений процесса garch(1,0)
  for (t in 2:num_obs) {  # Начинаем цикл со второго наблюдения
    volatility[t] <- omega + alpha * (process_values[t - 1])^2  # Вычисляем текущую волатильность
    process_values[t] <- sqrt(volatility[t]) * errors[t]  # Вычисляем текущее значение процесса
  }
  
  # Построение графиков
  par(mfrow = c(2, 1))  # Разделяем графики на 2 строки
  
  # График стационарного процесса
  plot(process_values, type = 'l', col = 'seagreen',  # Строим график процесса
       main = 'Стационарный процесс {h_n} garch(1,0)',  # Заголовок графика
       ylab = 'h_n', xlab = 'Время (n)')  # Подписи осей
  
  # График волатильности
  plot(volatility, type = 'l', col = 'blue',  # Строим график волатильности
       main = 'Волатильность {σ_n} garch(1,0)',  # Заголовок графика
       ylab = 'σ_n', xlab = 'Время (n)')  # Подписи осей
  
  return(process_values)  # Возвращаем значения стационарного процесса
}

# Генерация garch(1,0) с параметрами 
n <- 1000  # Указываем количество наблюдений
omega <- 0.9  # Устанавливаем значение omega
alpha <- 0.5  # Устанавливаем значение alpha
result <- garch_process(omega, alpha, n)  # Вызываем функцию для генерации процесса
# Стационарность достигается при 0 < alpha < 1
